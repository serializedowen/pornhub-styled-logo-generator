{"version":3,"sources":["utils/download.ts","hooks/useConfig.ts","hooks/useDebounce.ts","renderers/SvgRenderer.tsx"],"names":["download","content","filename","url","eleLink","document","createElement","Blob","URL","createObjectURL","style","display","href","body","appendChild","click","removeChild","revokeObjectURL","dataURItoBlob","dataURI","byteString","split","indexOf","atob","unescape","mimeString","ia","Uint8Array","length","i","charCodeAt","type","defaultConfig","width","height","leftWidth","rightWidth","padding","splitIndex","useState","state","setstate","value","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","newConfig","Object","assign","Math","max","substring","gblen","useStyles","makeStyles","root","position","exportPanel","visibility","transition","top","left","opacity","transform","renderer","SvgRenderer","setexportMethod","useConfig","svgRef","useRef","classes","exportFunction","useCallback","current","outerHTML","className","ref","x","y","rx","ry","fill","fontSize","fontFamily","alignmentBaseline","textAnchor"],"mappings":"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","file":"static/js/4.16cac1e0.chunk.js","sourcesContent":["export default function download(content: string | Blob, filename: string) {\n  const eleLink = document.createElement(\"a\");\n\n  let url: string;\n  if (content instanceof Blob) url = URL.createObjectURL(content);\n  else url = URL.createObjectURL(new Blob([content]));\n  eleLink.download = filename;\n  eleLink.style.display = \"none\";\n\n  eleLink.href = url;\n\n  document.body.appendChild(eleLink);\n  eleLink.click();\n  document.body.removeChild(eleLink);\n  URL.revokeObjectURL(url);\n}\n\nexport function dataURItoBlob(dataURI: string) {\n  // convert base64/URLEncoded data component to raw binary data held in a string\n  var byteString;\n  if (dataURI.split(\",\")[0].indexOf(\"base64\") >= 0)\n    byteString = atob(dataURI.split(\",\")[1]);\n  else byteString = unescape(dataURI.split(\",\")[1]);\n\n  // separate out the mime component\n  var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\n  // write the bytes of the string to a typed array\n  var ia = new Uint8Array(byteString.length);\n  for (var i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  return new Blob([ia], { type: mimeString });\n}\n","import { useState, useEffect } from \"react\";\nimport useDebounce from \"./useDebounce\";\n\nconst defaultConfig = {\n  width: 500,\n  height: 350,\n  leftWidth: 150,\n  rightWidth: 150,\n  padding: 20,\n};\nexport default ({\n  content,\n  splitIndex,\n}: Omit<IRendererProps, \"setexportMethod\">) => {\n  const [state, setstate] = useState(defaultConfig);\n\n  // const debounced = useDebounce({ content, splitIndex }, 100);\n\n  useDebounce(content, 100);\n  useEffect(() => {\n    const newConfig = Object.assign({}, defaultConfig);\n\n    newConfig.width =\n      Math.max(\n        content.substring(0, splitIndex).gblen,\n        content.substring(splitIndex).gblen\n      ) *\n        45 *\n        2 +\n      40;\n    // newConfig.height = Math.floor(newConfig.width * 0.6);\n    newConfig.height = 150;\n\n    newConfig.leftWidth = content.substring(0, splitIndex).gblen * 45;\n    newConfig.rightWidth = content.substring(splitIndex).gblen * 45;\n\n    setstate(newConfig);\n    return () => {};\n  }, [content, splitIndex]);\n\n  return state;\n};\n","import { useState, useEffect } from \"react\";\n\nexport default function useDebounce<T>(value: T, delay: number): T {\n  // State and setters for debounced value\n\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n","import React, { useRef, useCallback, useState, useEffect } from \"react\";\nimport useConfig from \"src/hooks/useConfig\";\nimport download from \"src/utils/download\";\nimport { IconButton, makeStyles, createStyles } from \"@material-ui/core\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nconst useStyles = makeStyles(\n  createStyles({\n    root: {\n      position: \"relative\",\n    },\n\n    exportPanel: {\n      visibility: \"hidden\",\n      transition: \"1s\",\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      opacity: 0,\n      transform: \"translate(-50%, -50%)\",\n    },\n\n    renderer: {\n      \"&:hover, & $exportPanel\": {\n        opacity: 1,\n        visibility: \"visible\",\n      },\n    },\n  })\n);\n\nexport default function SvgRenderer({\n  content,\n  splitIndex,\n  setexportMethod,\n}: IRendererProps) {\n  const { width, height, leftWidth, rightWidth, padding } = useConfig({\n    content,\n    splitIndex,\n  });\n  const svgRef = useRef<SVGSVGElement>(null);\n\n  const classes = useStyles();\n  const exportFunction = useCallback(() => {\n    if (svgRef.current) {\n      download(svgRef.current.outerHTML, \"logo.svg\");\n    }\n  }, []);\n\n  useEffect(() => {\n    setexportMethod(() => exportFunction);\n    return () => {\n      setexportMethod(() => () => {});\n    };\n  }, [exportFunction, setexportMethod]);\n\n  return (\n    <div className={classes.root}>\n      {/* {showButton && (\n      <IconButton\n        onClick={exportFunction}\n        color=\"primary\"\n        component=\"span\"\n        className={classes.exportPanel}\n      >\n        <GetAppIcon></GetAppIcon>\n      </IconButton>\n      )} */}\n\n      <svg\n        width={width + padding * 2}\n        height={height + padding * 2}\n        ref={svgRef}\n        className={classes.renderer}\n      >\n        <rect\n          x={padding}\n          y={padding}\n          width={width}\n          height={height}\n          rx=\"10\"\n          ry=\"10\"\n          style={{\n            fill: \"rgb(0,0,0)\",\n          }}\n        />\n\n        <rect\n          x={width / 2 + padding}\n          y={height * 0.1 + padding}\n          rx=\"10\"\n          ry=\"10\"\n          width={rightWidth}\n          height={height * 0.8}\n          style={{\n            fill: \"rgb(253,112,11)\",\n          }}\n        ></rect>\n        <text\n          fill=\"rgb(255,255,255)\"\n          fontSize=\"80\"\n          fontFamily=\"Arial\"\n          alignmentBaseline=\"middle\"\n          x={width / 2 + padding}\n          y={height / 2 + padding}\n          textAnchor=\"end\"\n        >\n          {content.substring(0, splitIndex)}\n        </text>\n        <text\n          fill=\"rgb(0,0,0)\"\n          fontSize=\"80\"\n          fontFamily=\"Arial\"\n          alignmentBaseline=\"middle\"\n          x={width / 2 + padding}\n          y={height / 2 + padding}\n        >\n          {content.substring(splitIndex)}\n        </text>\n      </svg>\n    </div>\n  );\n}\n"],"sourceRoot":""}