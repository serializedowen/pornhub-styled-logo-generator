{"version":3,"sources":["utils/download.ts","hooks/useConfig.ts","hooks/useDebounce.ts","utils/drawRoundedRect.ts","renderers/CanvasRenderer.tsx"],"names":["download","content","filename","url","eleLink","document","createElement","Blob","URL","createObjectURL","style","display","href","body","appendChild","click","removeChild","revokeObjectURL","dataURItoBlob","dataURI","byteString","split","indexOf","atob","unescape","mimeString","ia","Uint8Array","length","i","charCodeAt","type","defaultConfig","width","height","leftWidth","rightWidth","padding","splitIndex","useState","state","setstate","value","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","newConfig","Object","assign","Math","max","substring","gblen","roundRect","ctx","x","y","radius","fill","stroke","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","currentAnimation","CanvasRenderer","setexportMethod","canvasRef","useRef","useConfig","exportFunction","useCallback","current","toDataURL","React","useLayoutEffect","requestAnimationFrame","getContext","drawRoundedRect","fillStyle","font","textBaseline","textAlign","fillText","substr","save","cancelAnimationFrame","ref"],"mappings":"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","file":"static/js/3.58185c2b.chunk.js","sourcesContent":["export default function download(content: string | Blob, filename: string) {\n  const eleLink = document.createElement(\"a\");\n\n  let url: string;\n  if (content instanceof Blob) url = URL.createObjectURL(content);\n  else url = URL.createObjectURL(new Blob([content]));\n  eleLink.download = filename;\n  eleLink.style.display = \"none\";\n\n  eleLink.href = url;\n\n  document.body.appendChild(eleLink);\n  eleLink.click();\n  document.body.removeChild(eleLink);\n  URL.revokeObjectURL(url);\n}\n\nexport function dataURItoBlob(dataURI: string) {\n  // convert base64/URLEncoded data component to raw binary data held in a string\n  var byteString;\n  if (dataURI.split(\",\")[0].indexOf(\"base64\") >= 0)\n    byteString = atob(dataURI.split(\",\")[1]);\n  else byteString = unescape(dataURI.split(\",\")[1]);\n\n  // separate out the mime component\n  var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\n  // write the bytes of the string to a typed array\n  var ia = new Uint8Array(byteString.length);\n  for (var i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  return new Blob([ia], { type: mimeString });\n}\n","import { useState, useEffect } from \"react\";\nimport useDebounce from \"./useDebounce\";\n\nconst defaultConfig = {\n  width: 500,\n  height: 350,\n  leftWidth: 150,\n  rightWidth: 150,\n  padding: 20,\n};\nexport default ({\n  content,\n  splitIndex,\n}: Omit<IRendererProps, \"setexportMethod\">) => {\n  const [state, setstate] = useState(defaultConfig);\n\n  // const debounced = useDebounce({ content, splitIndex }, 100);\n\n  useDebounce(content, 100);\n  useEffect(() => {\n    const newConfig = Object.assign({}, defaultConfig);\n\n    newConfig.width =\n      Math.max(\n        content.substring(0, splitIndex).gblen,\n        content.substring(splitIndex).gblen\n      ) *\n        45 *\n        2 +\n      40;\n    // newConfig.height = Math.floor(newConfig.width * 0.6);\n    newConfig.height = 150;\n\n    newConfig.leftWidth = content.substring(0, splitIndex).gblen * 45;\n    newConfig.rightWidth = content.substring(splitIndex).gblen * 45;\n\n    setstate(newConfig);\n    return () => {};\n  }, [content, splitIndex]);\n\n  return state;\n};\n","import { useState, useEffect } from \"react\";\n\nexport default function useDebounce<T>(value: T, delay: number): T {\n  // State and setters for debounced value\n\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n","export default function roundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius = 5,\n  fill = true,\n  stroke = true\n) {\n  ctx.beginPath();\n  ctx.moveTo(x + radius, y);\n  ctx.lineTo(x + width - radius, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n  ctx.lineTo(x + width, y + height - radius);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n  ctx.lineTo(x + radius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n  ctx.lineTo(x, y + radius);\n  ctx.quadraticCurveTo(x, y, x + radius, y);\n  ctx.closePath();\n  if (stroke) {\n    ctx.stroke();\n  }\n  if (fill) {\n    ctx.fill();\n  }\n}\n","import React, { useEffect, useCallback, useRef } from \"react\";\nimport useConfig from \"src/hooks/useConfig\";\nimport drawRoundedRect from \"src/utils/drawRoundedRect\";\nimport download from \"src/utils/download\";\nimport { Button } from \"@material-ui/core\";\nimport { dataURItoBlob } from \"src/utils/download\";\n\nlet currentAnimation: number;\n\nexport default function CanvasRenderer({\n  content,\n  splitIndex,\n  setexportMethod,\n}: IRendererProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const { width, height, leftWidth, rightWidth, padding } = useConfig({\n    content,\n    splitIndex,\n  });\n\n  const exportFunction = useCallback(() => {\n    if (canvasRef.current) {\n      download(dataURItoBlob(canvasRef.current.toDataURL()), \"logo.png\");\n    }\n  }, []);\n  useEffect(() => {\n    setexportMethod(() => exportFunction);\n\n    return () => {\n      setexportMethod(() => () => {});\n    };\n  }, [exportFunction, setexportMethod]);\n\n  React.useLayoutEffect(() => {\n    const update = () => {\n      if (canvasRef.current) {\n        const ctx = canvasRef.current.getContext(\"2d\")!;\n        canvasRef.current.width = width + 2 * padding;\n        canvasRef.current.height = height + 2 * padding;\n\n        drawRoundedRect(ctx, padding, padding, width, height, 10);\n\n        ctx.fillStyle = \"rgba(255,255,255)\";\n        ctx.font = \"80px Arial\";\n        // fillStyle: \"rgba(184, 184, 184, 0.8)\",\n\n        ctx.textBaseline = \"middle\";\n        ctx.textAlign = \"end\";\n        ctx.fillText(\n          content.substr(0, splitIndex),\n          width / 2 + padding,\n          height / 2 + padding\n        );\n\n        ctx.fillStyle = \"rgb(253,112,11)\";\n        drawRoundedRect(\n          ctx,\n          width / 2 + padding,\n          height * 0.1 + padding,\n          rightWidth,\n          height * 0.8,\n          10\n        );\n\n        ctx.textAlign = \"start\";\n\n        ctx.fillStyle = \"rgb(0,0,0)\";\n        ctx.fillText(\n          content.substr(splitIndex),\n          width / 2 + padding,\n          height / 2 + padding\n        );\n        ctx.save();\n      }\n    };\n\n    currentAnimation = requestAnimationFrame(update);\n\n    return () => {\n      cancelAnimationFrame(currentAnimation);\n    };\n  }, [width, height, leftWidth, rightWidth, content, splitIndex]);\n\n  return (\n    <div>\n      <canvas ref={canvasRef}></canvas>\n    </div>\n  );\n}\n"],"sourceRoot":""}